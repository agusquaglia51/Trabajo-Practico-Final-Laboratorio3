package app;


import java.util.ArrayList;
import java.util.HashMap;
import java.util.Scanner;
import java.util.jar.JarException;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;


import modelado.ListaEmpleados;
import modelado.Profesor;
import modelado.Alumno;
import modelado.Empleado;
import modelado.HashMapAlumnos;
import modelado.IListaAlumnos;
import modelado.JsonUtiles;




public class Main {
	
	static Scanner scan;

	public static void main(String[] args) {
		
		scan = new Scanner(System.in);
		
		/*ListaEmpleados listaEmpleadosColegio = new ListaEmpleados();
		
		Profesor profe1 = new Profesor(70000,"MEDIFE","23514645","00123300","Matematica",1);
		
		Profesor profe2 = new Profesor(8000,"OAM","23514645","00124300","Fisica",4);
		
		Profesor profe3 = new Profesor(8000,"OAM","23514645","00124300","Fisica",4);
		
		Profesor profe4 = new Profesor("Agustin", "Quagliarella", "39826712", "Argentino", "CORRIENTES 2210", 70000, "OSDE", "123456", "00124500", "Biologia", 7);
		
		Profesor profe5 = new Profesor("Agustin", "Quagliarella", "39826712", "Argentino", "CORRIENTES 2210", 70000, "OSDE", "123456", "00124500", "Biologia", 7);

		
		Profesor profe6 = new Profesor("Agustin", "Quagliarella", "39826712", "Argentino", "CORRIENTES 2210", 70000, "OSDE", "123456", "00124500", "Biologia", 7);

		
		Profesor profe7 = new Profesor("Agustin", "Quagliarella", "39826712", "Argentino", "CORRIENTES 2210", 70000, "OSDE", "123456", "00124500", "Biologia", 7);

		
		Profesor profe8 = new Profesor("Agustin", "Quagliarella", "39826712", "Argentino", "CORRIENTES 2210", 70000, "OSDE", "123456", "00124500", "Biologia", 7);

		
		listaEmpleadosColegio.agregarElemento(profe8);
		listaEmpleadosColegio.agregarElemento(profe7);
		listaEmpleadosColegio.agregarElemento(profe6);
		listaEmpleadosColegio.agregarElemento(profe5);
		listaEmpleadosColegio.agregarElemento(profe4);
		
		
		listaEmpleadosColegio.agregarElemento(profe1);
		listaEmpleadosColegio.agregarElemento(profe2);
		listaEmpleadosColegio.agregarElemento(profe3);
		*/
		
		
		//String json = devolverJSON(listaEmpleadosColegio);
		
		
		//System.out.println(" "+json);
		
		//JSONtoJava(json);
		
		//JsonUtiles pruebaDeLectura = new JsonUtiles();
		
		//System.out.println(pruebaDeLectura.leer()); 
		
		
		
		Menu();
		
		
		
		
		
		
	}
	
	
	
	
	
	
	public static void JSONtoJava(String json) {
		
		
		try {
			
			JSONObject jsonObject = new JSONObject(json);
			
			JSONArray vector = jsonObject.getJSONArray("Profesores");
			int i = 0;
		
			
			while(i < vector.length()) {
				
				JSONObject profe = vector.getJSONObject(i);
				
				
				System.out.println(profe.get("Materia"));
				System.out.println(profe.get("Nombre"));
				System.out.println(profe.get("Apellido"));
				System.out.println(profe.get("Telefono"));
				System.out.println(profe.get("NroAsociado"));
				System.out.println(profe.get("ObraSocial"));
				System.out.println(profe.get("Sueldo"));
				System.out.println(profe.get("Direccion"));
				System.out.println(profe.get("Nacionalidad"));
				System.out.println(profe.get("CursosAcargo"));
				
				i++;
				
			}
			
		} catch (JSONException e) {
			e.printStackTrace();
		}
	}
	
	
	
	
	
	public static String devolverJSON(ListaEmpleados listaEmpleados){
		
		String jsonToString = "";
		
		JsonUtiles jsonArchivo = new JsonUtiles();
		
		try {
			
			JSONObject unObjeto = new JSONObject();
			
			JSONArray misProfesores = new JSONArray();
			
			int i = 0;
			
			while(i < listaEmpleados.cantidadEmpleados()){
				
				if(listaEmpleados.getEmpleado(i) instanceof Profesor) {
					
					Profesor aux = (Profesor) listaEmpleados.getEmpleado(i);
					
					JSONObject unProfesor = new JSONObject();
					
					unProfesor.put("Nombre", aux.getNombre());
					unProfesor.put("Apellido", aux.getApellido());
					unProfesor.put("Nacionalidad", aux.getNacionalidad());
					unProfesor.put("Direccion", aux.getDireccion());
					unProfesor.put("Sueldo", aux.getSueldo());
					unProfesor.put("ObraSocial", aux.getObraSocial());
					unProfesor.put("Telefono", aux.getTelefono());
					unProfesor.put("NroAsociado", aux.getNroAsociado());
					unProfesor.put("Materia", aux.getMateriaQueEnsenia());
					unProfesor.put("CursosAcargo", aux.getCantidadDeCursos());
					
					misProfesores.put(unProfesor);
					
				}
				i++;
			}
			
			unObjeto.put("Profesores", misProfesores);
			
			jsonArchivo.grabar(misProfesores);
		
			
			jsonToString = unObjeto.toString();
	            
		} catch (JSONException e) {
			e.printStackTrace();
		}
		
		return jsonToString;
	}
	
	
	
	public static boolean superLogin(String usuario, String contraseña)  {
		boolean flag = false;
		
        try {
            flag = login(usuario,contraseña);
        } 
        catch (NullPointerException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        
        return flag;
    }
	
	public static boolean login(String usuario, String contraseña) throws PasswordIncorrectException,NullPointerException {
		boolean flag = false;
		
        if(usuario == null || contraseña == null) {
            throw new NullPointerException("nfldmlk");
        }
        
        if(usuario.isEmpty() || contraseña.isEmpty()) {
            throw new PasswordIncorrectException("password incorrect",contraseña);
        }
        
        if((usuario.compareTo("admin") == 0) && (contraseña.compareTo("admin") == 0)) {
        	flag = true;
        	System.out.println("BIENVENIDO !!!");
        }else {
        	System.out.println("El usuario o la contraseña son incorrectos");
        }
        
        return flag;
    }
	
	
	public static void Menu() {
		
		
		String usuarioPredeterminado = "admin";
		String contraseniaPredeterminada = "admin";
		
		String usuario;
		String contra;
		int opc1,opc2;
		
		ListaEmpleados listaEmpleadosColegio = new ListaEmpleados();
		
		HashMapAlumnos mapAlumnos = new HashMapAlumnos();
		
		Scanner scan = new Scanner(System.in);
		
		ArrayList<String> materias = new ArrayList<String>();
		
		materias.add("Matematica");
		
		Profesor profe1 = new Profesor("Agustin", "Quagliarella", "39826712", "Argentino", "CORRIENTES 2210", 70000, "OSDE", "123456", "00124500", "Biologia", 7);

		Alumno alumno1 = new Alumno("Jose", "Garcia", "38265333", "Argentino", "Cordoba 1223", 123456789, "2235135789", "5to", "B",materias);
		
		
		do {
			System.out.println("Usuario: ");
			usuario = scan.next();
			System.out.println("contraseña: ");
			contra = scan.next();
		}while(superLogin(usuario,contra) == false);
		
		
		do {
		
		System.out.println("\n   ///// MENU /////   \n");
		
		System.out.println("1. Administrar la lista de empleados \n");
		System.out.println("2. Administrar la lista de alumnos \n");
		System.out.println("3. Mostrar json del archivo \n");
		System.out.println("4. Salir");
		
		opc1 = scan.nextInt();
		
		switch(opc1) {
			case 1:
				
				do {
					System.out.println("\n   ///// MENU /////   \n");
					
					System.out.println("1. Agregar un empleado a la lista \n");
					System.out.println("2. Quitar un empelado de la lista \n");
					System.out.println("3. Ver la cantidad de profesores \n");
					System.out.println("4. Ver la cantidad de administrativos \n");
					System.out.println("5. Imprimir listado de profesores \n");
					System.out.println("6. Imprimir listado de administrativos \n");
					System.out.println("7. Buscar un empleado \n");
					System.out.println("8. Salir \n");
					
					System.out.println("Digite la opcion que desea realizar: ");
					opc2 = scan.nextInt();
					
					
					switch(opc2) {
						case 1:
							listaEmpleadosColegio.agregarElemento(profe1);
							System.out.println("Se agrego un empleado correctamente \n");
							break;
							
						case 2:
							listaEmpleadosColegio.eliminarElemento(profe1);
							System.out.println("Se quito un empleado correctamente \n");

							break;
							
						case 3:
							System.out.println("La cantidad de profesores es de :" +listaEmpleadosColegio.cantidadDeProfesores()+"\n");
							break;
							
						case 4:
							System.out.println("La cantiada de administrativos es de: "+listaEmpleadosColegio.cantidadAdministrativos()+"\n");
							break;
							
						case 5:
							System.out.println(listaEmpleadosColegio.imprimirListadoProfesores());
							break;
							
						case 6:
							System.out.println(listaEmpleadosColegio.imprimirListadoAdministrativos());
							break;
							
						case 7:
							System.out.println(listaEmpleadosColegio.buscarElemento(profe1));
							break;
						
						case 8:
							break;
					}
					
				}while(opc2 != 8);
				break;
				
			case 2:
				
				do {
					System.out.println("\n   ///// MENU /////   \n");
					
					System.out.println("1. Agregar un alumno a la lista \n");
					System.out.println("2. Quitar un  alumno de la lista \n");
					System.out.println("3. Ver la cantidad de alumnos \n");
					System.out.println("4. Imprimir listado de alumnos \n");
					System.out.println("5. Limpiar lista de alumnos \n");
					System.out.println("6. Salir\n");
					
					System.out.println("Digite la opcion que desea realizar: ");
					opc2 = scan.nextInt();
				
				}while(opc2 != 6);
				
				switch(opc2) {
				
					case 1:
						mapAlumnos.agregar(alumno1);
						System.out.println("Se agrego un alumno correctamente \n");
						break;
					
					case 2:
						
						mapAlumnos.quitar(alumno1);
						System.out.println("Se quito un alumno correctamente \n");

						break;
						
					case 3:
						System.out.println("La cantidad de alumnos es de : "+mapAlumnos.contar()+"\n");
						break;
						
					case 4:
						System.out.println(mapAlumnos.listado());
						break;
						
					case 5:
						mapAlumnos.limpiarMapa();
						System.out.println("La lista se ha limpiado con exito! \n");
						break;
						
						
				}
			case 3:
				JsonUtiles pruebaDeLectura = new JsonUtiles();
				
				System.out.println(pruebaDeLectura.leer()); 
				break;
				
				
				
		}
		
		}while(opc1 != 4);
		System.out.println("El programa ha finalizado");
		
		
	}
	
	

}
